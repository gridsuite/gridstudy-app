name: CI

on:
  push:
    branches:
      - 'main'
  pull_request:

jobs:
  build: 
    # TODO replace ref when powsybl/github-ci#62 is merged
    uses: powsybl/github-ci/.github/workflows/build-frontend-app-generic.yml@aaae75875296657028f2805e7a3fbdb1418b8b95
    with:
      dockerImage: gridsuite/gridstudy-app
      dockerUsername: gridsuiteci
      eventType: gridstudy_app_updated
      licensercPath: .github/config/.licenserc.yaml
    secrets:
      sonar-token: ${{ secrets.SONAR_TOKEN }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}
      repo-token: ${{ secrets.REPO_ACCESS_TOKEN }}
